<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Expressing Love</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./css/auth.css">
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .back-home {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color, #ff6b9d);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .back-home:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 107, 157, 0.4);
        }

        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin: 80px 0 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary-color, #ff6b9d);
            display: block;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .admin-nav {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-tab {
            padding: 10px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-tab.active {
            background: var(--primary-color, #ff6b9d);
            color: white;
            transform: scale(1.05);
        }

        .nav-tab:hover {
            background: rgba(255, 107, 157, 0.2);
        }

        .admin-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .feature-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f8 100%);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--primary-color, #ff6b9d);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-desc {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .feature-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-color, #ff6b9d);
            color: white;
        }

        .btn-secondary {
            background: #667eea;
            color: white;
        }

        .btn-danger {
            background: #ff4757;
            color: white;
        }

        .btn-success {
            background: #2ed573;
            color: white;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: rgba(255, 107, 157, 0.05);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color, #ff6b9d);
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background: #cce7ff;
            color: #004085;
            border: 1px solid #b3d9ff;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 15px;
            }

            .back-home {
                position: relative;
                display: block;
                text-align: center;
                margin-bottom: 20px;
            }

            .admin-header {
                margin-top: 20px;
                padding: 20px;
            }

            .nav-tabs {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .data-table {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <!-- Background Music -->
    <audio id="backgroundMusic" autoplay loop preload="auto" style="display: none;">
        <source src="https://files.catbox.moe/4vb6xe.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Animated floating hearts background -->
    <div class="hearts-container" id="hearts-container"></div>

    <a href="index.html" class="back-home">üè† Back to Home</a>

    <div class="admin-container">
        <!-- Access Denied Screen -->
        <div id="access-denied" style="display: none;">
            <div class="admin-header">
                <h1>üö´ Access Denied</h1>
                <p>You do not have administrative privileges</p>
                <a href="index.html" class="btn btn-primary" style="display: inline-block; margin-top: 20px; text-decoration: none;">
                    Return to Home
                </a>
            </div>
        </div>

        <!-- Admin Panel Content -->
        <div id="admin-panel" style="display: none;">
            <div class="admin-header">
                <h1>‚öôÔ∏è Administrative Dashboard</h1>
                <p>Complete control center for Expressing Love platform</p>
                <div style="margin-top: 15px;">
                    <span>Welcome, Admin Heritage</span>
                    <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;" id="admin-status"></div>
                </div>
            </div>

            <!-- Statistics Dashboard -->
            <div class="admin-stats" id="stats-dashboard">
                <div class="stat-card">
                    <span class="stat-number" id="total-users">0</span>
                    <div class="stat-label">üë• Total Users</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="total-messages">0</span>
                    <div class="stat-label">üí¨ Messages Sent</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="total-gifts">0</span>
                    <div class="stat-label">üéÅ Gifts Sent</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="active-today">0</span>
                    <div class="stat-label">üü¢ Active Today</div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="admin-nav">
                <div class="nav-tabs">
                    <button class="nav-tab active" onclick="showSection('user-management')">üë• Users</button>
                    <button class="nav-tab" onclick="showSection('content-moderation')">üõ°Ô∏è Content</button>
                    <button class="nav-tab" onclick="showSection('analytics')">üìä Analytics</button>
                    <button class="nav-tab" onclick="showSection('system-settings')">‚öôÔ∏è Settings</button>
                    <button class="nav-tab" onclick="showSection('security')">üîê Security</button>
                    <button class="nav-tab" onclick="showSection('backup')">üíæ Backup</button>
                    <button class="nav-tab" onclick="showSection('communication')">üì¢ Communication</button>
                    <button class="nav-tab" onclick="showSection('feature-management')">üöÄ Features</button>
                </div>
            </div>

            <!-- Content Sections -->
            <div class="admin-content">
                <!-- User Management Section -->
                <div id="user-management" class="content-section active">
                    <h2>üë• User Management Dashboard</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üîç User Search & Filter</div>
                            <div class="feature-desc">Search users by name, email, join date, activity status</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="openUserSearch()">Open Search</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">‚úèÔ∏è User Profile Editor</div>
                            <div class="feature-desc">Edit user profiles, update information, manage preferences</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="openUserEditor()">Manage Profiles</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üö´ User Suspension System</div>
                            <div class="feature-desc">Temporarily suspend users for policy violations</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="manageSuspensions()">Manage Suspensions</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üóëÔ∏è Account Deletion</div>
                            <div class="feature-desc">Permanently delete user accounts and associated data</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="manageAccountDeletion()">Delete Accounts</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üëë Role Management</div>
                            <div class="feature-desc">Assign admin, moderator, or special user roles</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="manageRoles()">Assign Roles</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìä User Activity Logs</div>
                            <div class="feature-desc">View detailed activity logs for any user</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewActivityLogs()">View Logs</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Moderation Section -->
                <div id="content-moderation" class="content-section">
                    <h2>üõ°Ô∏è Content Moderation Center</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üö® Reported Content Review</div>
                            <div class="feature-desc">Review and moderate reported messages, profiles, and content</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="reviewReports()">Review Reports</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîç Content Scanner</div>
                            <div class="feature-desc">Scan all content for inappropriate material or spam</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="runContentScan()">Run Scan</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìù Message Moderation</div>
                            <div class="feature-desc">Review and moderate private messages between users</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="moderateMessages()">Moderate Messages</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üñºÔ∏è Image Content Filter</div>
                            <div class="feature-desc">Review and filter uploaded profile pictures and images</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="filterImages()">Filter Images</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">ü§ñ Automated Moderation</div>
                            <div class="feature-desc">Configure automatic content filtering rules</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="configureAutoModeration()">Configure Rules</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìã Moderation Log</div>
                            <div class="feature-desc">View history of all moderation actions taken</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewModerationLog()">View Log</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div id="analytics" class="content-section">
                    <h2>üìä Platform Analytics</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üìà User Growth Analytics</div>
                            <div class="feature-desc">Track user registration trends and growth patterns</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewGrowthAnalytics()">View Analytics</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üí¨ Message Analytics</div>
                            <div class="feature-desc">Analyze message patterns, frequency, and engagement</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewMessageAnalytics()">View Analytics</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üéÅ Gift Analytics</div>
                            <div class="feature-desc">Track gift sending patterns and popular gifts</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewGiftAnalytics()">View Analytics</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üïê Activity Heatmap</div>
                            <div class="feature-desc">Visualize user activity patterns by time and date</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewActivityHeatmap()">View Heatmap</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üì± Device Analytics</div>
                            <div class="feature-desc">Analyze user device types, browsers, and locations</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewDeviceAnalytics()">View Analytics</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üé® Feature Usage Stats</div>
                            <div class="feature-desc">Track which features are most/least used</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewFeatureStats()">View Stats</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìä Custom Reports</div>
                            <div class="feature-desc">Generate custom analytics reports</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="createCustomReport()">Create Report</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìà Real-time Dashboard</div>
                            <div class="feature-desc">Monitor platform activity in real-time</div>
                            <div class="feature-actions">
                                <button class="btn btn-success" onclick="openRealTimeDashboard()">Open Dashboard</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Settings Section -->
                <div id="system-settings" class="content-section">
                    <h2>‚öôÔ∏è System Configuration</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üé® Theme Management</div>
                            <div class="feature-desc">Configure global themes and color schemes</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageThemes()">Manage Themes</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìß Email Configuration</div>
                            <div class="feature-desc">Configure email templates and SMTP settings</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="configureEmail()">Configure Email</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîß Platform Settings</div>
                            <div class="feature-desc">Configure core platform settings and limits</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="managePlatformSettings()">Manage Settings</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üåê API Configuration</div>
                            <div class="feature-desc">Configure external API integrations</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="configureAPI()">Configure API</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìù Terms & Privacy</div>
                            <div class="feature-desc">Update terms of service and privacy policy</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="updateLegalDocs()">Update Documents</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üéµ Media Settings</div>
                            <div class="feature-desc">Configure background music and media settings</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="configureMedia()">Configure Media</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Section -->
                <div id="security" class="content-section">
                    <h2>üîê Security Management</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üîí Access Control</div>
                            <div class="feature-desc">Manage user permissions and access levels</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageAccessControl()">Manage Access</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üõ°Ô∏è Firewall Settings</div>
                            <div class="feature-desc">Configure IP blocking and security rules</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="configureFirewall()">Configure Firewall</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìä Security Logs</div>
                            <div class="feature-desc">Monitor security events and login attempts</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="viewSecurityLogs()">View Logs</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîê Password Policy</div>
                            <div class="feature-desc">Configure password requirements and policies</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="configurePasswordPolicy()">Configure Policy</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">‚ö° Rate Limiting</div>
                            <div class="feature-desc">Configure API and action rate limits</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="configureRateLimiting()">Configure Limits</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîç Vulnerability Scanner</div>
                            <div class="feature-desc">Scan for security vulnerabilities</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="runVulnerabilitycan()">Run Scan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Backup Section -->
                <div id="backup" class="content-section">
                    <h2>üíæ Data Management</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üíæ Database Backup</div>
                            <div class="feature-desc">Create and manage database backups</div>
                            <div class="feature-actions">
                                <button class="btn btn-success" onclick="createBackup()">Create Backup</button>
                                <button class="btn btn-primary" onclick="viewBackups()">View Backups</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîÑ Data Restore</div>
                            <div class="feature-desc">Restore data from previous backups</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="restoreData()">Restore Data</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üì§ Data Export</div>
                            <div class="feature-desc">Export user data and analytics</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="exportData()">Export Data</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üì• Data Import</div>
                            <div class="feature-desc">Import data from external sources</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="importData()">Import Data</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üóëÔ∏è Data Cleanup</div>
                            <div class="feature-desc">Clean up old or unnecessary data</div>
                            <div class="feature-actions">
                                <button class="btn btn-danger" onclick="cleanupData()">Cleanup Data</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">‚è∞ Scheduled Backups</div>
                            <div class="feature-desc">Configure automatic backup schedules</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="configureScheduledBackups()">Configure Schedule</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Communication Section -->
                <div id="communication" class="content-section">
                    <h2>üì¢ Communication Tools</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üì¢ Global Announcements</div>
                            <div class="feature-desc">Send platform-wide announcements to all users</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="sendGlobalAnnouncement()">Send Announcement</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìß Email Campaigns</div>
                            <div class="feature-desc">Create and send email campaigns to users</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="createEmailCampaign()">Create Campaign</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üíå User Messaging</div>
                            <div class="feature-desc">Send direct messages to specific users</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="sendDirectMessage()">Send Message</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üîî Push Notifications</div>
                            <div class="feature-desc">Configure and send push notifications</div>
                            <div class="feature-actions">
                                <button class="btn btn-success" onclick="configurePushNotifications()">Configure Notifications</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üìã Newsletter Management</div>
                            <div class="feature-desc">Manage newsletter subscriptions and content</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageNewsletter()">Manage Newsletter</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">ü§ù Support Tickets</div>
                            <div class="feature-desc">Manage user support requests and tickets</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageSupportTickets()">Manage Tickets</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feature Management Section -->
                <div id="feature-management" class="content-section">
                    <h2>üöÄ Feature Management</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-title">üéõÔ∏è Feature Toggles</div>
                            <div class="feature-desc">Enable/disable platform features dynamically</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageFeatureToggles()">Manage Features</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üß™ A/B Testing</div>
                            <div class="feature-desc">Configure and monitor A/B tests</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="configureABTesting()">Configure Tests</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üéÅ Gift Management</div>
                            <div class="feature-desc">Add, remove, and modify available gifts</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageGifts()">Manage Gifts</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üí≠ Quote Management</div>
                            <div class="feature-desc">Manage romantic quotes and love messages</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageQuotes()">Manage Quotes</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üéµ Music Library</div>
                            <div class="feature-desc">Manage background music and audio files</div>
                            <div class="feature-actions">
                                <button class="btn btn-primary" onclick="manageMusicLibrary()">Manage Music</button>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-title">üé® Theme Builder</div>
                            <div class="feature-desc">Create and customize new themes</div>
                            <div class="feature-actions">
                                <button class="btn btn-secondary" onclick="openThemeBuilder()">Build Themes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Generic Modal -->
    <div id="generic-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="modal-title">Feature</h3>
            <div id="modal-body">
                <p>This feature is under development. Administrative capabilities will be available soon.</p>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <script type="module">
        import './js/auth-guard.js';
        import authManager from './js/auth.js';
        import { db, collection, getDocs, query, where, orderBy } from './js/firebase-config.js';

        const ADMIN_EMAIL = 'oladoyeheritage445@gmail.com';
        let currentUser = null;

        // Create floating hearts animation
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('hearts-container');
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíò', 'üíù', 'üíú', '‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô'];
            
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                
                heartsContainer.appendChild(heart);
                
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 10000);
            }, 500);
        }

        async function checkAdminAccess() {
            try {
                currentUser = authManager.currentUser;
                if (!currentUser) {
                    window.location.href = 'login.html';
                    return;
                }

                if (currentUser.email !== ADMIN_EMAIL) {
                    document.getElementById('access-denied').style.display = 'block';
                    return;
                }

                document.getElementById('admin-panel').style.display = 'block';
                document.getElementById('admin-status').textContent = `Last login: ${new Date().toLocaleString()}`;
                
                await loadStatistics();
            } catch (error) {
                console.error('Error checking admin access:', error);
                document.getElementById('access-denied').style.display = 'block';
            }
        }

        async function loadStatistics() {
            try {
                // Count total users
                const usersSnapshot = await getDocs(collection(db, 'users'));
                document.getElementById('total-users').textContent = usersSnapshot.size;

                // Count total messages
                const messagesSnapshot = await getDocs(collection(db, 'messages'));
                document.getElementById('total-messages').textContent = messagesSnapshot.size;

                // Count total gifts
                const giftsSnapshot = await getDocs(collection(db, 'gifts'));
                document.getElementById('total-gifts').textContent = giftsSnapshot.size;

                // Count users active today (simplified - just show total users for now)
                document.getElementById('active-today').textContent = Math.floor(usersSnapshot.size * 0.3); // Estimate 30% active

            } catch (error) {
                console.error('Error loading statistics:', error);
                // Set default values if loading fails
                document.getElementById('total-users').textContent = '0';
                document.getElementById('total-messages').textContent = '0';
                document.getElementById('total-gifts').textContent = '0';
                document.getElementById('active-today').textContent = '0';
            }
        }

        window.showSection = function(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        window.closeModal = function() {
            document.getElementById('generic-modal').style.display = 'none';
        }

        function showFeatureModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').innerHTML = content;
            document.getElementById('generic-modal').style.display = 'flex';
        }

        // Feature function implementations (showing modal for now)
        window.openUserSearch = () => showFeatureModal('User Search & Filter', '<p>Advanced user search functionality will allow filtering by various criteria including registration date, activity level, and user preferences.</p>');
        window.openUserEditor = () => showFeatureModal('User Profile Editor', '<p>Comprehensive profile editing tools for administrators to manage user information and settings.</p>');
        window.manageSuspensions = () => showFeatureModal('User Suspension System', '<p>Tools to temporarily suspend user accounts with customizable suspension periods and reasons.</p>');
        window.manageAccountDeletion = () => showFeatureModal('Account Deletion', '<p>Secure account deletion system with data cleanup and audit trail.</p>');
        window.manageRoles = () => showFeatureModal('Role Management', '<p>Hierarchical role system with customizable permissions and access levels.</p>');
        window.viewActivityLogs = () => showFeatureModal('User Activity Logs', '<p>Detailed logging system tracking user actions and platform interactions.</p>');
        
        window.reviewReports = () => showFeatureModal('Reported Content Review', '<p>Content moderation queue for reviewing user reports and taking appropriate actions.</p>');
        window.runContentScan = () => showFeatureModal('Content Scanner', '<p>Automated content scanning for inappropriate material using AI and keyword filters.</p>');
        window.moderateMessages = () => showFeatureModal('Message Moderation', '<p>Private message review system with privacy-conscious moderation tools.</p>');
        window.filterImages = () => showFeatureModal('Image Content Filter', '<p>Image analysis and filtering system for profile pictures and uploads.</p>');
        window.configureAutoModeration = () => showFeatureModal('Automated Moderation', '<p>Rule-based content filtering with customizable triggers and actions.</p>');
        window.viewModerationLog = () => showFeatureModal('Moderation Log', '<p>Comprehensive audit trail of all moderation actions and decisions.</p>');

        window.viewGrowthAnalytics = () => showFeatureModal('User Growth Analytics', '<p>Detailed analytics on user acquisition, retention, and growth patterns.</p>');
        window.viewMessageAnalytics = () => showFeatureModal('Message Analytics', '<p>Message volume, engagement patterns, and communication trends analysis.</p>');
        window.viewGiftAnalytics = () => showFeatureModal('Gift Analytics', '<p>Gift popularity, sending patterns, and user engagement with virtual gifts.</p>');
        window.viewActivityHeatmap = () => showFeatureModal('Activity Heatmap', '<p>Visual representation of user activity patterns across time periods.</p>');
        window.viewDeviceAnalytics = () => showFeatureModal('Device Analytics', '<p>User device, browser, and geographic distribution analytics.</p>');
        window.viewFeatureStats = () => showFeatureModal('Feature Usage Stats', '<p>Usage statistics for all platform features and user engagement metrics.</p>');
        window.createCustomReport = () => showFeatureModal('Custom Reports', '<p>Report builder for creating custom analytics reports with various data sources.</p>');
        window.openRealTimeDashboard = () => showFeatureModal('Real-time Dashboard', '<p>Live monitoring dashboard showing real-time platform activity and metrics.</p>');

        window.manageThemes = () => showFeatureModal('Theme Management', '<p>Global theme configuration with color schemes, fonts, and layout options.</p>');
        window.configureEmail = () => showFeatureModal('Email Configuration', '<p>SMTP settings, email templates, and automated email system configuration.</p>');
        window.managePlatformSettings = () => showFeatureModal('Platform Settings', '<p>Core platform configuration including limits, permissions, and global settings.</p>');
        window.configureAPI = () => showFeatureModal('API Configuration', '<p>External API integration settings and third-party service configurations.</p>');
        window.updateLegalDocs = () => showFeatureModal('Terms & Privacy', '<p>Legal document management system for terms of service and privacy policies.</p>');
        window.configureMedia = () => showFeatureModal('Media Settings', '<p>Background music, audio settings, and media file management.</p>');

        // Additional feature implementations
        window.manageAccessControl = () => showFeatureModal('Access Control', '<p>User permission management and role-based access control system.</p>');
        window.configureFirewall = () => showFeatureModal('Firewall Settings', '<p>IP blocking, rate limiting, and security rule configuration.</p>');
        window.viewSecurityLogs = () => showFeatureModal('Security Logs', '<p>Security event monitoring and suspicious activity detection.</p>');
        window.configurePasswordPolicy = () => showFeatureModal('Password Policy', '<p>Password strength requirements and security policy configuration.</p>');
        window.configureRateLimiting = () => showFeatureModal('Rate Limiting', '<p>API rate limiting and action throttling configuration.</p>');
        window.runVulnerabilityScan = () => showFeatureModal('Vulnerability Scanner', '<p>Security vulnerability scanning and assessment tools.</p>');

        window.createBackup = () => showFeatureModal('Database Backup', '<p>Create comprehensive database backups with encryption and compression.</p>');
        window.viewBackups = () => showFeatureModal('View Backups', '<p>Backup history and management with restore point selection.</p>');
        window.restoreData = () => showFeatureModal('Data Restore', '<p>Selective or full data restoration from backup archives.</p>');
        window.exportData = () => showFeatureModal('Data Export', '<p>Export platform data in various formats for analysis or migration.</p>');
        window.importData = () => showFeatureModal('Data Import', '<p>Import data from external sources with validation and mapping tools.</p>');
        window.cleanupData = () => showFeatureModal('Data Cleanup', '<p>Automated cleanup of old logs, deleted user data, and temporary files.</p>');
        window.configureScheduledBackups = () => showFeatureModal('Scheduled Backups', '<p>Automated backup scheduling with configurable retention policies.</p>');

        window.sendGlobalAnnouncement = () => showFeatureModal('Global Announcements', '<p>Send platform-wide announcements to all active users.</p>');
        window.createEmailCampaign = () => showFeatureModal('Email Campaigns', '<p>Create and send targeted email campaigns to user segments.</p>');
        window.sendDirectMessage = () => showFeatureModal('User Messaging', '<p>Send direct administrative messages to specific users.</p>');
        window.configurePushNotifications = () => showFeatureModal('Push Notifications', '<p>Configure browser push notifications for user engagement.</p>');
        window.manageNewsletter = () => showFeatureModal('Newsletter Management', '<p>Newsletter creation, subscription management, and distribution.</p>');
        window.manageSupportTickets = () => showFeatureModal('Support Tickets', '<p>User support ticket system with priority and assignment management.</p>');

        window.manageFeatureToggles = () => showFeatureModal('Feature Toggles', '<p>Dynamic feature enabling/disabling without code deployment.</p>');
        window.configureABTesting = () => showFeatureModal('A/B Testing', '<p>A/B test configuration and results analysis for feature optimization.</p>');
        window.manageGifts = () => showFeatureModal('Gift Management', '<p>Add, remove, and customize virtual gifts available to users.</p>');
        window.manageQuotes = () => showFeatureModal('Quote Management', '<p>Manage the library of romantic quotes and love messages.</p>');
        window.manageMusicLibrary = () => showFeatureModal('Music Library', '<p>Upload and manage background music files and audio content.</p>');
        window.openThemeBuilder = () => showFeatureModal('Theme Builder', '<p>Visual theme builder with real-time preview and customization tools.</p>');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createFloatingHearts();
            checkAdminAccess();
        });

        // Background music handler
        document.addEventListener('DOMContentLoaded', function() {
            const music = document.getElementById('backgroundMusic');
            
            function playMusic() {
                if (music) {
                    music.volume = 0.3;
                    music.play().then(() => {
                        console.log('Background music started playing');
                    }).catch(error => {
                        console.log('Could not autoplay audio:', error);
                        document.addEventListener('click', function playOnClick() {
                            music.play().then(() => {
                                console.log('Background music started after user click');
                                document.removeEventListener('click', playOnClick);
                            }).catch(err => console.log('Still could not play audio:', err));
                        }, { once: true });
                    });
                }
            }
            
            playMusic();
        });
    </script>
</body>
</html>