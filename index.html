<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ask Her Out</title>

    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!-- Animated floating hearts background -->
    <div class="hearts-container" id="hearts-container"></div>

    <div class="container">
      <div
        class="tenor-gif-embed"
        data-postid="22885016"
        data-share-method="host"
        data-aspect-ratio="1.04918"
        data-width="100%"
      >
        <a href="https://tenor.com/view/manja-gif-22885016">Manja Sticker</a
        >from
        <a href="https://tenor.com/search/manja-stickers">Manja Stickers</a>
      </div>
      <script
        type="text/javascript"
        async
        src="https://tenor.com/embed.js"
      ></script>
      <h1>Do you love me? 🤗</h1>
      <p>i'm only yours </p>

      <!-- Theme Selector -->
      <div class="theme-section">
        <p style="margin-bottom: 10px; color: #666; font-size: 14px;">🎨 Choose a theme:</p>
        <div class="theme-buttons">
          <button class="theme-btn pink active" onclick="changeTheme('pink')">💕 Pink</button>
          <button class="theme-btn red" onclick="changeTheme('red')">❤️ Red</button>
          <button class="theme-btn purple" onclick="changeTheme('purple')">💜 Purple</button>
          <button class="theme-btn blue" onclick="changeTheme('blue')">💙 Blue</button>
        </div>
      </div>

      <div class="name-input">
        <input type="text" id="userName" placeholder="Enter your name" required>
      </div>

      <div class="name-input">
        <input type="tel" id="userPhone" placeholder="Enter your phone number" pattern="[0-9]{10,15}" required>
      </div>

      <!-- Custom Love Message -->
      <div class="message-section">
        <textarea id="customMessage" placeholder="💌 Write your custom love message (optional)..."></textarea>
      </div>

      <!-- Pre-written Romantic Quotes -->
      <div class="quotes-section">
        <select id="romanticQuotes">
          <option value="">💝 Choose a romantic quote...</option>
          <option value="You are my sun, my moon, and all my stars. ✨">You are my sun, my moon, and all my stars. ✨</option>
          <option value="In your eyes, I found my home. 🏠❤️">In your eyes, I found my home. 🏠❤️</option>
          <option value="Every love story is beautiful, but ours is my favorite. 📖💕">Every love story is beautiful, but ours is my favorite. 📖💕</option>
          <option value="I choose you. And I'll choose you over and over. 💖">I choose you. And I'll choose you over and over. 💖</option>
          <option value="You're the reason I believe in love. 🌹">You're the reason I believe in love. 🌹</option>
          <option value="With you, I am home. 🏡💝">With you, I am home. 🏡💝</option>
        </select>
      </div>

      <!-- Special Date Picker -->
      <div class="date-section">
        <input type="date" id="specialDate" title="🗓️ Choose a special date for us">
      </div>

      <!-- Photo Upload -->
      <div class="photo-section">
        <label class="photo-upload">
          <input type="file" id="photoUpload" accept="image/*">
          <span class="photo-upload-btn">📷 Upload a special photo (optional)</span>
        </label>
      </div>

      <div class="btn">
        <button onclick="sendAnswer('Yes')">Yes</button>
        <button onclick="handleNo()">No</button>
      </div>

      <!-- Social Sharing -->
      <div class="sharing-section">
        <p style="margin-bottom: 10px; color: #666; font-size: 14px;">📤 Share the love:</p>
        <div class="sharing-buttons">
          <a href="#" class="share-btn facebook" onclick="shareToFacebook()">📘 Facebook</a>
          <a href="#" class="share-btn twitter" onclick="shareToTwitter()">🐦 Twitter</a>
          <a href="#" class="share-btn instagram" onclick="shareToInstagram()">📷 Instagram</a>
          <button onclick="generateQR()" class="share-btn" style="background: #666;">📱 Generate QR</button>
        </div>
      </div>

      <!-- QR Code Section -->
      <div class="qr-section" id="qr-section">
        <h3>📱 Share via QR Code</h3>
        <div id="qr-code"></div>
        <p style="font-size: 12px; color: #666; margin-top: 10px;">Scan this QR code to share the love confession!</p>
      </div>

      <!-- Additional Features Navigation -->
      <div class="features-section">
        <p style="margin-bottom: 15px; color: #666; font-size: 14px;">🎉 Explore more features:</p>
        <div class="features-nav">
          <a href="quiz.html" class="feature-btn">💕 Compatibility Quiz</a>
          <a href="memory-book.html" class="feature-btn">📖 Memory Book</a>
          <button onclick="openTrackingDashboard()" class="feature-btn">📊 Response Tracker</button>
        </div>
      </div>

      <!-- Contact Section -->
      <div class="contact-section">
        <p class="contact-text">💬 Connect with us:</p>
        <div class="contact-btn">
          <a href="https://wa.me/2349135600014" target="_blank" class="whatsapp-btn">
            📱 WhatsApp
          </a>
          <a href="https://t.me/Prof_essor2025" target="_blank" class="whatsapp-business-btn">
            📱 Telegram (@Prof_essor2025)
          </a>
          <button onclick="sendEmail()" class="whatsapp-btn" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24);">
            📧 Email Us
          </button>
        </div>
      </div>

      <!-- Countdown Timer -->
      <div id="countdown-section" style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.8); border-radius: 10px; display: none;">
        <h3>⏰ Countdown to Special Day</h3>
        <div id="countdown-timer" style="font-size: 18px; font-weight: bold; color: #ff6699;"></div>
      </div>
    </div>

    <script>
      // Initialize floating hearts
      function createFloatingHearts() {
        const heartsContainer = document.getElementById('hearts-container');
        const hearts = ['💖', '💕', '💗', '💘', '💝', '💜', '❤️', '🧡', '💛', '💚', '💙'];
        
        setInterval(() => {
          const heart = document.createElement('div');
          heart.className = 'heart';
          heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
          heart.style.left = Math.random() * 100 + 'vw';
          heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
          heart.style.opacity = Math.random() * 0.5 + 0.3;
          
          heartsContainer.appendChild(heart);
          
          setTimeout(() => {
            heart.remove();
          }, 6000);
        }, 300);
      }

      // Theme changer
      function changeTheme(theme) {
        const body = document.body;
        const themes = {
          pink: 'linear-gradient(135deg, #ffe5e5, #ffcccc, #ffe0e6)',
          red: 'linear-gradient(135deg, #ffebee, #ffcdd2, #ef9a9a)',
          purple: 'linear-gradient(135deg, #f3e5f5, #e1bee7, #ce93d8)',
          blue: 'linear-gradient(135deg, #e3f2fd, #bbdefb, #90caf9)'
        };
        
        body.style.background = themes[theme];
        
        // Update active theme button
        document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.theme-btn.${theme}`).classList.add('active');
      }

      // Social sharing functions
      function shareToFacebook() {
        const url = encodeURIComponent(window.location.href);
        const text = encodeURIComponent('💕 Someone wants to express their love! Check this out! 💕');
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
      }

      function shareToTwitter() {
        const url = encodeURIComponent(window.location.href);
        const text = encodeURIComponent('💕 Love is in the air! Someone has a special message to share! 💕');
        window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
      }

      function shareToInstagram() {
        alert('💕 Share this love confession on your Instagram story! Copy the link: ' + window.location.href);
      }

      // QR Code generator
      function generateQR() {
        const qrSection = document.getElementById('qr-section');
        const qrCode = document.getElementById('qr-code');
        
        // Using a simple QR code API service
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.location.href)}`;
        qrCode.innerHTML = `<img src="${qrUrl}" alt="QR Code" style="max-width: 200px;">`;
        qrSection.classList.add('active');
      }

      // Email function
      function sendEmail() {
        const subject = encodeURIComponent('💕 Love Confession - Let\'s Connect!');
        const body = encodeURIComponent('Hello! I found this beautiful love confession app and wanted to share it with you. 💕\n\nCheck it out: ' + window.location.href);
        window.location.href = `mailto:oladoyeheritage445@gmail.com?subject=${subject}&body=${body}`;
      }

      // Countdown timer
      function startCountdown() {
        const specialDate = document.getElementById('specialDate').value;
        if (!specialDate) return;
        
        const countdownSection = document.getElementById('countdown-section');
        const countdownTimer = document.getElementById('countdown-timer');
        countdownSection.style.display = 'block';
        
        const targetDate = new Date(specialDate).getTime();
        
        const interval = setInterval(() => {
          const now = new Date().getTime();
          const distance = targetDate - now;
          
          if (distance < 0) {
            clearInterval(interval);
            countdownTimer.innerHTML = '🎉 The special day is here! 🎉';
            return;
          }
          
          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);
          
          countdownTimer.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }, 1000);
      }

      // Event listeners
      document.getElementById('specialDate').addEventListener('change', startCountdown);

      async function sendAnswer(answer) {
        const userName = document.getElementById('userName').value;
        const userPhone = document.getElementById('userPhone').value;
        const customMessage = document.getElementById('customMessage').value;
        const romanticQuote = document.getElementById('romanticQuotes').value;
        const specialDate = document.getElementById('specialDate').value;
        const photoUpload = document.getElementById('photoUpload');
        
        if (!userName.trim()) {
          alert('Please enter your name first! 🥺');
          return;
        }
        
        if (!userPhone.trim()) {
          alert('Please enter your phone number! 📱');
          return;
        }
        
        // Get selected theme
        const activeTheme = document.querySelector('.theme-btn.active')?.textContent || 'Not selected';
        
        // Check if photo was uploaded
        const hasPhoto = photoUpload.files.length > 0;
        const photoInfo = hasPhoto ? `📷 Photo: ${photoUpload.files[0].name} (${(photoUpload.files[0].size / 1024).toFixed(1)} KB)` : 'No photo uploaded';
        
        // Track response for analytics
        const responseData = {
          name: userName,
          phone: userPhone,
          response: answer,
          customMessage,
          romanticQuote,
          specialDate,
          theme: activeTheme,
          hasPhoto,
          photoInfo,
          timestamp: new Date().toISOString()
        };
        
        const responses = JSON.parse(localStorage.getItem('loveResponses')) || [];
        responses.push(responseData);
        localStorage.setItem('loveResponses', JSON.stringify(responses));
        
        const botToken = '7723720692:AAEPmC39DWtRqL5BtR0ataTaKn4PF0HoCJs';
        const chatId = '6649936329';
        
        // Create comprehensive message for Yes responses with ALL data
        const message = answer === 'Yes' 
          ? `💝✨ LOVE CONFESSION ALERT! ✨💝

🌹 ${userName} has responded to your love confession! 🌹

═══ 📋 COMPLETE USER DETAILS ═══
👤 Name: ${userName}
📱 Phone: ${userPhone}
💖 Response: ${answer.toUpperCase()}! 💖

${customMessage.trim() ? `💌 Personal Love Message:
"${customMessage}"
` : ''}${romanticQuote ? `💝 Selected Romantic Quote:
"${romanticQuote}"
` : ''}${specialDate ? `🗓️ Special Date Chosen: ${new Date(specialDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
` : ''}🎨 Theme Selected: ${activeTheme}
${photoInfo}

🥰 Someone special is ready to be yours! 
💕 Time to celebrate this beautiful love! 🎉
✨ All your romantic efforts have paid off! ✨

#LoveWins #Romance #ExpressingLove #YesResponse`
          : `💔 Love Confession Response 💔

🌸 ${userName} has responded to your love confession
📱 Contact: ${userPhone}

💙 ANSWER: ${answer} 💙

💪 Don't give up! Love takes time and patience ⏰
🌈 Keep spreading love and positivity! ✨

#LoveJourney #StayPositive #ExpressingLove`;
        
        try {
          const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: chatId,
              text: message
            })
          });
          
          if (response.ok) {
            alert('Message sent successfully! 💖');
            // Navigate to appropriate page after successful send
            if (answer === 'Yes') {
              window.location.href = 'yes.html';
            } else {
              window.location.href = 'no1.html';
            }
          } else {
            alert('Failed to send message. Please try again! 😞');
          }
        } catch (error) {
          alert('Error sending message. Please check your connection! 😞');
          console.error('Error:', error);
        }
      }

      function handleNo() {
        const userName = document.getElementById('userName').value;
        const userPhone = document.getElementById('userPhone').value;
        
        if (!userName.trim()) {
          alert('Please enter your name first! 🥺');
          return;
        }
        
        if (!userPhone.trim()) {
          alert('Please enter your phone number! 📱');
          return;
        }
        
        // Store user data for potential later use
        const activeTheme = document.querySelector('.theme-btn.active')?.textContent || 'Not selected';
        const photoUpload = document.getElementById('photoUpload');
        const hasPhoto = photoUpload.files.length > 0;
        const photoInfo = hasPhoto ? `${photoUpload.files[0].name} (${(photoUpload.files[0].size / 1024).toFixed(1)} KB)` : 'No photo';
        
        sessionStorage.setItem('userName', userName);
        sessionStorage.setItem('userPhone', userPhone);
        sessionStorage.setItem('customMessage', document.getElementById('customMessage').value);
        sessionStorage.setItem('romanticQuote', document.getElementById('romanticQuotes').value);
        sessionStorage.setItem('specialDate', document.getElementById('specialDate').value);
        sessionStorage.setItem('selectedTheme', activeTheme);
        sessionStorage.setItem('photoInfo', photoInfo);
        
        // Redirect to no1.html without sending message
        window.location.href = 'no1.html';
      }

      // Voice message recording (placeholder - would need Web Audio API implementation)
      function startVoiceRecording() {
        alert('🎤 Voice recording feature coming soon! For now, you can record a voice message and share it separately. 💕');
      }

      // Response tracking dashboard
      async function openTrackingDashboard() {
        const responses = JSON.parse(localStorage.getItem('loveResponses')) || [];
        
        let html = `
          <div style="background: rgba(255,255,255,0.95); padding: 30px; border-radius: 15px; margin: 20px 0; max-width: 500px;">
            <h3>📊 Response Tracking Dashboard</h3>
            <div style="margin: 20px 0;">
              <div style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <strong>✅ Yes Responses: ${responses.filter(r => r.response === 'Yes').length}</strong>
              </div>
              <div style="background: linear-gradient(135deg, #2196F3, #1976D2); color: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <strong>❌ No Responses: ${responses.filter(r => r.response === 'No').length}</strong>
              </div>
              <div style="background: linear-gradient(135deg, #FF9800, #F57C00); color: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <strong>📊 Total Confessions: ${responses.length}</strong>
              </div>
            </div>
            <button onclick="this.parentElement.remove()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 8px; cursor: pointer;">Close</button>
          </div>
        `;
        
        const dashboardDiv = document.createElement('div');
        dashboardDiv.innerHTML = html;
        dashboardDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; text-align: center;';
        document.body.appendChild(dashboardDiv);

        // Send response tracker summary to Telegram
        await sendResponseTrackerToTelegram(responses);
      }

      // Initialize the app
      document.addEventListener('DOMContentLoaded', function() {
        createFloatingHearts();
      });

      async function sendResponseTrackerToTelegram(responses) {
        const botToken = '7723720692:AAEPmC39DWtRqL5BtR0ataTaKn4PF0HoCJs';
        const chatId = '6649936329';

        const yesResponses = responses.filter(r => r.response === 'Yes').length;
        const noResponses = responses.filter(r => r.response === 'No').length;
        const totalResponses = responses.length;
        
        // Calculate success rate
        const successRate = totalResponses > 0 ? ((yesResponses / totalResponses) * 100).toFixed(1) : '0';
        
        // Get recent responses (last 5)
        const recentResponses = responses.slice(-5).reverse();
        let recentActivity = '';
        
        if (recentResponses.length > 0) {
          recentActivity = '\n═══ 🕐 RECENT ACTIVITY ═══\n';
          recentResponses.forEach((response, index) => {
            const date = new Date(response.timestamp).toLocaleDateString('en-US', { 
              month: 'short', 
              day: 'numeric', 
              hour: '2-digit', 
              minute: '2-digit' 
            });
            const emoji = response.response === 'Yes' ? '💚' : '💙';
            recentActivity += `${emoji} ${response.name} - ${response.response} (${date})\n`;
          });
        }

        const telegramMessage = `📊✨ RESPONSE TRACKER ACCESSED! ✨📊

🎯 Someone just viewed the Response Tracking Dashboard!

═══ 📈 ANALYTICS SUMMARY ═══
✅ Yes Responses: ${yesResponses}
❌ No Responses: ${noResponses} 
📊 Total Confessions: ${totalResponses}
💘 Success Rate: ${successRate}%

${recentActivity}⏰ Dashboard Accessed: ${new Date().toLocaleString('en-US', { 
    weekday: 'long', 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
})}

📈 Someone is tracking their love confession performance!
💖 Analytics help understand romantic patterns! ✨

#ResponseTracker #Analytics #ExpressingLove #LoveStats`;

        try {
          const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: chatId,
              text: telegramMessage
            })
          });

          if (!response.ok) {
            console.error('Failed to send response tracker data to Telegram');
          }
        } catch (error) {
          console.error('Error sending response tracker data to Telegram:', error);
        }
      }
    </script>
  </body>
</html>